{"ast":null,"code":"import _slicedToArray from\"C:/Users/theva/Desktop/Projects/Content-Listing/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState,useCallback}from'react';import{useSelector,useDispatch}from'react-redux';import{setSearchQuery,fetchContentData}from'./actions/action';// Update with your actual action creators\nimport ContentItem from'./ContentItem';import SearchBar from'./SearchBar';import InfiniteScroll from'react-infinite-scroll-component';import debounce from'lodash/debounce';// Import debounce function\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ContentGrid=function ContentGrid(){var dispatch=useDispatch();var searchQuery=useSelector(function(state){return state.search.searchQuery;});// Update with your actual state property\nvar contentData=useSelector(function(state){return state.search.contentData;});// Update with your actual state property\nvar _useState=useState(1),_useState2=_slicedToArray(_useState,2),currentPage=_useState2[0],setCurrentPage=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),hasMore=_useState4[0],setHasMore=_useState4[1];// Track if more data is available\nuseEffect(function(){if(currentPage<4){dispatch(fetchContentData(currentPage,setHasMore));}else{setHasMore(false);}},[dispatch,currentPage]);var debouncedHandleSearch=useCallback(debounce(function(query){dispatch(setSearchQuery(query));},300),[dispatch]// eslint-disable-next-line react-hooks/exhaustive-deps\n);var handleLoadMore=function handleLoadMore(){if(currentPage<4){setCurrentPage(currentPage+1);}// Load the next page\n};var filteredData=contentData===null||contentData===void 0?void 0:contentData.filter(function(item){return item.name.toLowerCase().includes(searchQuery.toLowerCase());});return/*#__PURE__*/_jsxs(\"div\",{children:[console.log(\"searchQuery\",searchQuery),/*#__PURE__*/_jsx(SearchBar,{setSearchQuery:debouncedHandleSearch}),/*#__PURE__*/_jsx(InfiniteScroll,{dataLength:filteredData.length// This is important to track the data length\n,next:handleLoadMore,hasMore:hasMore,children:/*#__PURE__*/_jsx(\"div\",{className:\"content-grid\",children:filteredData===null||filteredData===void 0?void 0:filteredData.map(function(item,id){return/*#__PURE__*/_jsx(ContentItem,{item:item,filteredData:true},id);})})})]});};export default ContentGrid;","map":{"version":3,"names":["React","useEffect","useState","useCallback","useSelector","useDispatch","setSearchQuery","fetchContentData","ContentItem","SearchBar","InfiniteScroll","debounce","jsx","_jsx","jsxs","_jsxs","ContentGrid","dispatch","searchQuery","state","search","contentData","_useState","_useState2","_slicedToArray","currentPage","setCurrentPage","_useState3","_useState4","hasMore","setHasMore","debouncedHandleSearch","query","handleLoadMore","filteredData","filter","item","name","toLowerCase","includes","children","console","log","dataLength","length","next","className","map","id"],"sources":["C:/Users/theva/Desktop/Projects/Content-Listing/src/components/ContentGrid.js"],"sourcesContent":["import React, { useEffect ,useState,useCallback } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { setSearchQuery, fetchContentData } from './actions/action'; // Update with your actual action creators\r\nimport ContentItem from './ContentItem';\r\nimport SearchBar from './SearchBar';\r\nimport InfiniteScroll from 'react-infinite-scroll-component';\r\nimport debounce from 'lodash/debounce'; // Import debounce function\r\n\r\nconst ContentGrid = () => {\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const searchQuery = useSelector((state) => state.search.searchQuery); // Update with your actual state property\r\n\r\n  const contentData = useSelector((state) => state.search.contentData); // Update with your actual state property\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [hasMore, setHasMore] = useState(true); // Track if more data is available\r\n\r\n  useEffect(() => {\r\n    if(currentPage<4){\r\n    dispatch(fetchContentData(currentPage, setHasMore));\r\n    }\r\n    else{\r\n      setHasMore(false)\r\n    }\r\n  }, [dispatch, currentPage]);\r\n\r\n  const debouncedHandleSearch = useCallback(\r\n    debounce((query) => {\r\n      dispatch(setSearchQuery(query));\r\n    }, 300),\r\n    [dispatch] // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    \r\n  );\r\n \r\n  const handleLoadMore = () => {\r\n    if(currentPage<4){\r\n    setCurrentPage(currentPage + 1); \r\n    }// Load the next page\r\n\r\n  };\r\n\r\n  const filteredData = contentData?.filter((item) =>\r\n    item.name.toLowerCase().includes(searchQuery.toLowerCase())\r\n  );\r\n\r\n  return (\r\n    <div>\r\n      {console.log(\"searchQuery\", searchQuery)}\r\n      \r\n      {<SearchBar setSearchQuery={debouncedHandleSearch} />}\r\n\r\n      <InfiniteScroll\r\n        dataLength={filteredData.length} // This is important to track the data length\r\n        next={handleLoadMore}\r\n        hasMore={hasMore}\r\n      >\r\n        <div className=\"content-grid\">\r\n\r\n          {filteredData?.map((item, id) => (\r\n            <ContentItem key={id} item={item} filteredData />\r\n          ))}\r\n        </div>\r\n      </InfiniteScroll>\r\n\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ContentGrid;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}